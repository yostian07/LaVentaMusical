@* Views/Shared/_Layout.cshtml *@
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title - LaVentaMusical</title>

    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />

    <style>
        /* ====== RESET/BASE ====== */
        html, body { margin:0; padding:0; }
        /* Altura del header */
        :root { --header-h:56px; }

        body { padding-top: var(--header-h); }

        /* ====== HEADER FIXED ====== */
        .topbar {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1030;
            background: #1f1f1f; color: #fff; height: var(--header-h);
            box-shadow: 0 2px 6px rgba(0,0,0,.15);
        }
        .topbar__inner {
            height: 100%;
            display: flex; align-items: center; gap: 24px;
            max-width: 1200px; margin: 0 auto; padding: 0 16px;
        }
        .brand {
            font-weight: 700; letter-spacing: .3px; color:#fff; text-decoration:none;
            white-space:nowrap;
        }

        /* MENÚ SIEMPRE VISIBLE */
        .menu, .account { display:flex; align-items:center; gap:18px; }
        .menu a, .account a {
            color:#f5f5f5; text-decoration:none; padding:6px 2px;
        }
        .menu a:hover, .account a:hover { color:#fff; text-decoration:underline; }

        /* Empujar cuenta a la derecha */
        .spacer { flex:1 1 auto; }

        /* CONTENIDO */
        .container-page { max-width:1200px; margin:0 auto; padding: 24px 16px; }
        footer { margin: 40px 0 10px; color:#777; }

        /* Responsive: mantener todo visible (solo reducimos espacios) */
        @@media (max-width: 768px) {
            .menu, .account { gap:12px; }
            .topbar__inner { padding: 0 10px; }
        }
    </style>
</head>
<body>

    <!-- HEADER PROPIO (sin Bootstrap, siempre visible) -->
    <header class="topbar">
        <div class="topbar__inner">
            <a class="brand" href="@Url.Action("Index","Home")">LaVentaMusical</a>

            <nav class="menu">
                <a href="@Url.Action("Index","Canciones")">Catálogo</a>
                <a href="@Url.Action("Index","Carrito")">Carrito</a>
                <a href="@Url.Action("Index","Ordenes")">Mis compras</a>
            </nav>

            <div class="spacer"></div>

            <div class="account">
                @if (Request.IsAuthenticated)
                {
                    <span>@User.Identity.Name</span>
                    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                    {
                        @Html.AntiForgeryToken()
                        <a href="#" onclick="document.getElementById('logoutForm').submit(); return false;">Cerrar sesión</a>
                    }
                }

                else
                {
                    <a href="@Url.Action("Register","Account")">Registrarse</a>
                    <a href="@Url.Action("Login","Account")">Iniciar sesión</a>
                }
            </div>
        </div>
    </header>

    <!-- CONTENIDO -->
    <main class="container-page">
        @RenderBody()
        <hr />
        <footer>
            <p>&copy; @DateTime.Now.Year - LaVentaMusical</p>
        </footer>
    </main>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")

    @Html.Partial("_Toasts")

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script>
        (function () {
            if (typeof toastr !== "undefined" && window.__toasts) {
                toastr.options = { positionClass: "toast-bottom-right", timeOut: 4000, progressBar: true, closeButton: true };
                var t = window.__toasts;
                if (t.Success) toastr.success(t.Success);
                if (t.Info) toastr.info(t.Info);
                if (t.Warning) toastr.warning(t.Warning);
                if (t.Error) toastr.error(t.Error);
            }
        })();
    </script>

    @RenderSection("scripts", required: false)
</body>
</html>
